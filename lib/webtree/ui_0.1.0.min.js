/*! UI 2014-03-13 */
var wtUI=angular.module("wt-ui",[]);wtUI.directive("keyEnter",["$timeout",function(a){"use strict";return function(b,c,d){c.bind("keydown keypress",function(c){function e(d){a(function(){b.$apply(d),c.preventDefault()})}var f,g,h=/key\d+/i;for(f in d)g=f.match(h),g&&c.which===g.input.replace("key","")&&e(d[g.input])})}}]),wtUI.directive("loader",function(){"use strict";return{restrict:"AE",scope:{loader:"="},link:function(a,b){var c={lines:12,length:7,width:5,radius:10,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:100,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},d=new Spinner(c),e=b[0].parentNode;b[0].style.position="absolute",b[0].style.width=e.offsetWidth+"px",b[0].style.height=e.offsetHeight+"px",a.$watch("loader",function(a){a?(b[0].style.display="block",d.spin(b[0])):(b[0].style.display="none",d.stop())})}}}),wtUI.directive("map",function(){"use strict";return{restrict:"EA",link:function(a,b){{var c={center:new google.maps.LatLng(-34.397,150.644),zoom:8};new google.maps.Map(b[0],c)}}}}),wtUI.directive("pager",function(){"use strict";return{restrict:"AE",replace:!0,scope:{action:"&"},template:'<ul class="pagination" data-ng-show="pages.length > 0"><li><a data-ng-click="previous();">{{ previousText }}</a></li><li data-ng-class="{active: page === currentPage}" data-ng-repeat="page in pages"><a data-ng-click="changePage(page);">{{ page }}</a></li><li><a data-ng-click="next();">{{ nextText }}</a></li></ul>',link:function(a,b,c){function d(){a.visiblePages=a.visiblePages?parseInt(a.visiblePages):a.totalPages<9?a.totalPages:9,a.previousText=c.previousText||"<",a.nextText=c.nextText||">",a.pages=[];var b,d=a.currentPage-Math.floor(a.visiblePages/2);for(1>d?d=1:a.totalPages-d<a.visiblePages&&(d=a.totalPages-a.visiblePages+1),b=d+a.visiblePages-1,b>a.totalPages&&(b=a.totalPages),a.pages=[],e=d;b>=e;e+=1)a.pages.push(e)}var e=0;a.totalPages=0,a.visiblePages=0,a.currentPage=1,a.previous=function(){a.currentPage>1&&(a.currentPage-=1,a.changePage(a.currentPage))},a.next=function(){a.currentPage<a.totalPages&&(a.currentPage+=1,a.changePage(a.currentPage))},a.changePage=function(b){a.currentPage=b,a.action({page:a.currentPage}),d()},c.$observe("totalPages",function(b){b&&(a.totalPages=parseInt(b),d())}),c.$observe("currentPage",function(b){b&&(a.currentPage=parseInt(b),d())}),c.$observe("visiblePages",function(b){b&&(a.visiblePages=parseInt(b)<9?parseInt(b):9,d())})}}}),wtUI.directive("pillbox",function(){"use strict";return{restrict:"AE",replace:!0,template:'<ul class="pillbox-container"><li data-ng-repeat="tag in tags" data-ng-click="clickTag(tag);"><span data-ng-bind="tag"></span><a data-ng-show="showRemoveTagButton" data-ng-click="removeTag(tag);">x</a></li><li class="new-tag" data-ng-show="showInputField"><input type="text" data-key-enter data-key13="addTag();" data-key188="addTag();" placeholder="Add a tag" data-ng-model="newTagValue" /></li></ul>',scope:{tags:"=",onClick:"&",onAdd:"&",onRemove:"&"},link:function(a,b,c){a.showRemoveTagButton=!0,c.showRemoveTagButton&&(a.showRemoveTagButton="true"===c.showRemoveTagButton),a.showInputField=!0,c.showInputField&&(a.showInputField="true"===c.showInputField),a.clickTag=function(b){a.onClick({tag:b})},a.addTag=function(){var b=0,c=!1;for(a.tags||(a.tags=[]),b=0;b<a.tags.length;b+=1)if(a.tags[b]===a.newTagValue){c=!0;break}!c&&a.newTagValue&&(a.tags.push(a.newTagValue),a.onAdd({tag:a.newTagValue})),a.newTagValue=""},a.removeTag=function(b){var c=0;for(c=0;c<a.tags.length;c+=1)if(a.tags[c]===b){a.tags.splice(c,1),a.onRemove({tag:b});break}}}}}),wtUI.directive("scroller",function(){"use strict";return{restrict:"AECM",scope:{},link:function(){}}}),wtUI.service("toastr",["$log",function(a){"use strict";this.options={debug:!1,positionClass:"toast-top-right",onclick:null,fadeIn:300,fadeOut:1e3,timeOut:5e3,extendedTimeOut:1e3},this.clear=function(){toastr.clear()},this.show=function(b,c,d){switch(d&&(d.positionClass&&(toastr.options.positionClass=d.positionClass),d.fadeIn&&(toastr.options.fadeIn=d.fadeIn),d.fadeOut&&(toastr.options.fadeOut=d.fadeOut),d.timeOut&&(toastr.options.timeOut=d.timeOut),d.extendedTimeOut&&(toastr.options.extendedTimeOut=d.extendedTimeOut)),c){case"success":a.log(b),toastr.success(b);break;case"info":a.info(b),toastr.info(b);break;case"warning":a.warn(b),toastr.warning(b);break;case"error":a.error(b),toastr.error(b);break;default:a.info(b),toastr.info(b)}}}]);